{
  "if":{
      "eq":{
          "username":"root"
      },
      "lt":{
          "age":30
      }
  },
  "then":{
      "error":"root user age should be > 30"
  },
  "allOf":[
    {
      "if":{
        "neq":{
          "class":"",
          "username":""
        }
      },
      "then":{
        "set":{
            "desc":"${username}(${class})" ,
            "desc_upper":["str.toUpper()","${username}(${class})"]
        }
      }
    },
    {
      "if":{
        "ipIn":{
          "cip":["1.2.3.4"]
        }
      },
      "then":{
        "error":"invalid ip: ${cip}"
      }
    },
    {
      "properties": {
        "username": {
          "type": "string"
        },
        "age": {
          "type": "integer"
        },
        "class": {
          "type": "string",
          "enum": ["1","2","3"]
        }
      }
    }
  ]
}